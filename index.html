<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Roster Dashboard</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      .officer-identity {
        display: flex;
        flex-wrap: wrap;
        gap: 6px 12px;
        align-items: center;
        margin-top: 8px;
        padding: 10px 12px;
        background: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 6px;
      }
      .officer-identity label {
        font-size: 12px;
        color: #555;
        white-space: nowrap;
      }
      .officer-identity input {
        padding: 5px 8px;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 13px;
        width: 140px;
      }
      .optional {
        font-size: 10px;
        color: #aaa;
        font-style: italic;
      }
    </style>
  </head>

  <body>
    <h2>Roster Optimisation Dashboard</h2>

    <div class="controls">
      <div class="segmented mode-group">
        <div class="segment-highlight" id="modeHighlight"></div>
        <button id="arrivalBtn" class="segment-btn" data-index="0">
          Arrival
        </button>
        <button id="departureBtn" class="segment-btn" data-index="1">
          Departure
        </button>
      </div>

      <div class="segmented shift-group">
        <div class="segment-highlight" id="shiftHighlight"></div>
        <button id="morningBtn" class="segment-btn" data-index="0">
          Morning
        </button>
        <button id="nightBtn" class="segment-btn" data-index="1">Night</button>
      </div>

      <div class="color-group">
        <button
          class="color-btn selected"
          data-color="#4CAF50"
          style="background: #4caf50"
        ></button>
        <button
          class="color-btn"
          data-color="#FF9800"
          style="background: #ff9800"
        ></button>
        <button
          class="color-btn"
          data-color="#FFFF00"
          style="background: #ffff00"
        ></button>
        <button
          class="color-btn"
          data-color="#FFB6C1"
          style="background: #ffb6c1"
        ></button>
        <button
          class="color-btn"
          data-color="#800080"
          style="background: #800080"
        ></button>
        <button
          class="color-btn"
          data-color="#2196F3"
          style="background: #2196f3"
        ></button>
        <button
          class="color-btn"
          data-color="#FF0000"
          style="background: #ff0000"
        ></button>
      </div>

      <button id="clearGridBtn">Clear Grid</button>
    </div>

    <!-- ================= MANPOWER INPUT ================= -->
    <div class="manpower-section">
      <h3>Add Officers</h3>

      <div class="manpower-type">
        <button class="mp-type active" data-type="main">Main</button>
        <button class="mp-type" data-type="sos">SOS</button>
        <button class="mp-type" data-type="ot">OT</button>
      </div>

      <div class="mp-controls">
        <label>Number of Officers:</label>
        <input type="number" id="officerCount" min="1" value="1" />

        <!-- Train / OWC — only relevant for night shift, shown/hidden by JS -->
        <div id="trainOwcFields" style="display: none">
          <hr
            style="border: none; border-top: 1px solid #e0e0e0; margin: 8px 0"
          />
          <label id="trainOwcLabel">Train Officers:</label>
          <input type="number" id="trainOwcCount" min="1" value="1" />
          <button id="addTrainOwcBtn">Add</button>
          <small
            id="trainOwcHint"
            style="
              color: #888;
              font-size: 11px;
              display: block;
              margin-top: 3px;
            "
          >
            Remove individually via Remove Officer
          </small>
        </div>

        <!-- SOS Timing -->
        <div id="sosFields" style="display: none">
          <label>Start (HH:MM)</label>
          <input type="time" id="sosStart" />
          <label>End (HH:MM)</label>
          <input type="time" id="sosEnd" />
        </div>

        <!-- OT Slot -->
        <div id="otFields" style="display: none">
          <label>OT Slot</label>
          <select id="otSlot">
            <option value="0600-1100">0600 – 1100</option>
            <option value="1100-1600">1100 – 1600</option>
            <option value="1600-2100">1600 – 2100</option>
          </select>
        </div>

        <!-- Optional name / serial — shown for all types -->
        <div class="officer-identity">
          <label>Name <span class="optional">(optional)</span></label>
          <input type="text" id="officerName" placeholder="e.g. John" />

          <label>Serial No. <span class="optional">(optional)</span></label>
          <input type="text" id="officerSerial" placeholder="e.g. S12345" />
        </div>

        <!-- ACTION BUTTONS -->
        <div class="action-buttons">
          <button id="addOfficerBtn">Add Officers</button>
          <button id="removeOfficerBtn">Remove Officer</button>
          <button id="undoBtn">Undo</button>
        </div>
      </div>
    </div>
    <!-- ================= MANPOWER INPUT END ================= -->

    <div class="table-container">
      <table id="rosterTable"></table>
    </div>

    <h3>Manning Summary</h3>
    <div class="summary-controls">
      <button id="copySummaryBtn">Copy Summary</button>
    </div>
    <pre id="manningSummary"></pre>

    <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
    <script src="script.js"></script>

    <!-- ================= ROSTER TABLES ================= -->
    <h2>Roster</h2>

    <h3>Main Roster</h3>
    <button onclick="copyMainRoster()">Copy Main Roster</button>
    <table id="mainRosterTable">
      <thead>
        <tr>
          <th>Officer</th>
          <th>Counter / Break</th>
          <th>Start</th>
          <th>End</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h3>SOS Roster</h3>
    <button onclick="copySOSRoster()">Copy SOS Roster</button>
    <table id="sosRosterTable">
      <thead>
        <tr>
          <th>Officer</th>
          <th>Counter / Break</th>
          <th>Start</th>
          <th>End</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h3>OT Roster</h3>
    <button onclick="copyOTRoster()">Copy OT Roster</button>
    <table id="otRosterTable">
      <thead>
        <tr>
          <th>Officer</th>
          <th>Counter / Break</th>
          <th>Start</th>
          <th>End</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </body>
</html>
